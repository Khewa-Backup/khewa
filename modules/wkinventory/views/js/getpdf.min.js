/**
* NOTICE OF LICENSE
*
* This file is part of the 'WK Inventory' module feature.
* Developped by Khoufi Wissem (2017).
* You are not allowed to use it on several site
* You are not allowed to sell or redistribute this module
* This header must not be removed
*
*  @author    KHOUFI Wissem - K.W
*  @copyright Khoufi Wissem
*  @license   http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
*/
$(document).ready(function(){function processEnd(t){$(".progress-label").text(txt_gencomplete),$("#progressbar").after('<div align="center"><a href="'+t+'" class="btn btn-primary" target="_blank">'+txt_download+"</a></div>"),window.location=t}var t,e,a,r=$("#progressbar"),n=$(".progress-label");r.progressbar({value:!1,change:function(){n.text(r.progressbar("value")+"%")},complete:function(){n.text(txt_waitlink)}}),"undefined"!=typeof parts&&(t=100/parts),e=JSON.stringify(post_data),a=1,function processCreatePDF(n){var s=n+1;$.ajax({url:unescape(urlpdf),type:"post",data:"createpdf="+s+"&inventories_products_ids="+inventories_products_ids+"&post_data="+e+"&page_num="+a+"&pdf_length="+parts,dataType:"json",success:function(o){o.page_num?(a+=parseInt(o.page_num),r.progressbar("value",Math.round(t*s)),s<parts?processCreatePDF(n+1):$.ajax({url:$('input[name="url2getpdf"]').val(),data:"post_data="+e,type:"post",dataType:"json",success:function(t){t.link?processEnd(t.link):$.ajax({url:$('input[name="url2getpdf"]').val(),type:"post",dataType:"json",success:function(t){processEnd(t.link)}})},error:function(t,e,a){alert(t.status),alert(a)}})):o.error?alert(o.error):alert("Something went wrong")},error:function(t,e,a){alert(t.status),alert(a)}})}(0)});
